(()=>{"use strict";var t={156:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=o(394),r=function(){function t(t,e,o,i,r){this.isSafe=!0,this.pos=t,this.v=e,this.size=o,this.ballType=i,this.target=r}return t.prototype.getX=function(){return this.pos.x},t.prototype.getY=function(){return this.pos.y},t.prototype.setX=function(t){this.pos.x=t},t.prototype.setY=function(t){this.pos.y=t},t.prototype.getVx=function(){return this.v.x},t.prototype.getVy=function(){return this.v.y},t.prototype.setVX=function(t){this.v.x=t},t.prototype.setVY=function(t){this.v.y=t},t.prototype.invertVX=function(){this.v.x*=-1},t.prototype.invertVY=function(){this.v.y*=-1},t.prototype.getSize=function(){return this.size},t.prototype.getAngle=function(){return this.v.theta},t.prototype.setAngle=function(t){this.v.theta=t},t.prototype.getBallType=function(){return this.ballType},t.prototype.getIsSafe=function(){return this.isSafe},t.prototype.draw=function(t){this.ballType.update(t,this)},t.prototype.updateVelocity=function(){this.setVX(Math.cos(this.getAngle())*this.v.mag),this.setVY(Math.sin(this.getAngle())*this.v.mag)},t.prototype.recalculateAngle=function(){if(!this.isSafe){var t=(0,i.v_angle)((0,i.v_sub)(this.pos,this.target)),e=Math.sign(t-this.getAngle());this.setAngle(this.getAngle()+.2*e),this.updateVelocity(),this.getAngle().toPrecision(1)===t.toPrecision(1)&&(this.isSafe=!0)}},t.prototype.update=function(t){this.target=t.getPos(),this.isSafe=!1},t}();e.default=r},995:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(o(156)),n=i(o(271)),s=function(){function t(){this.ballTypes=[]}return t.prototype.createBall=function(t,e,o,i,n,s){var a=this.getBallType(o,n,i);return new r.default(t,e,i,a,s)},t.prototype.getBallType=function(t,e,o){var i=this.ballTypes.find((function(i){return i.equals(t,e,o)}));if(i)return console.log('[BallFactory]: Ball of type "'+t+'" already exists.'),i;console.log('[BallFactory]: Creating ball of type "'+t+'"');var r=new n.default(t,e,o);return this.ballTypes.push(r),r},t}();e.default=s},271:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(o(888)),n=function(){function t(t,e,o){this.type=t,this.color=e,this.size=o}return t.prototype.getType=function(){return this.type},t.prototype.getColor=function(){return this.color},t.prototype.getSize=function(){return this.size},t.prototype.equals=function(t,e,o){return this.color===e&&this.size===o&&this.type===t},t.prototype.update=function(t,e){e.setX(e.getX()+e.getVx()),e.setY(e.getY()+e.getVy()),(e.getX()>r.default.WIDTH||e.getX()<0)&&e.invertVX(),(e.getY()>r.default.HEIGHT||e.getY()<0)&&e.invertVY(),e.getIsSafe()||e.recalculateAngle(),this.draw(t,e)},t.prototype.draw=function(t,e){t.save(),t.shadowColor=e.getBallType().getColor(),t.shadowBlur=10,t.strokeStyle=e.getBallType().getColor(),t.beginPath(),t.ellipse(e.getX(),e.getY(),e.getSize(),e.getSize(),e.getAngle(),0,360),t.stroke(),t.beginPath(),t.moveTo(e.getX(),e.getY());var o=e.getSize()*Math.cos(e.getAngle()),i=e.getSize()*Math.sin(e.getAngle());t.lineTo(e.getX()+o,e.getY()+i),t.stroke(),t.restore()},t}();e.default=n},807:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=o(882),r=function(){function t(t,e){this.pos={x:0,y:0},this.widthBound=t,this.heightBound=e,this.pos.x=(0,i.rand)(this.widthBound),this.pos.y=(0,i.rand)(this.heightBound),this.rad=(0,i.rand)(100,40)}return t.prototype.changeLocation=function(){this.pos.x=(0,i.rand)(this.widthBound),this.pos.y=(0,i.rand)(this.heightBound),this.rad--,console.log("[Region]: Location: ("+this.pos.x+", "+this.pos.y+") with radius "+this.rad)},t.prototype.getPos=function(){return this.pos},t.prototype.draw=function(t){t.save();var e="rgb(96, 245, 66)";t.shadowColor=e,t.shadowBlur=10,t.strokeStyle=e,t.beginPath(),t.ellipse(this.pos.x,this.pos.y,this.rad,this.rad,0,0,360),t.stroke(),t.restore()},t}();e.default=r},955:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(o(807)),n=i(o(888)),s=function(){function t(){this.observers=[],this.region=new r.default(n.default.WIDTH,n.default.HEIGHT)}return t.prototype.subscribe=function(t){this.observers.push(t)},t.prototype.unsubscribe=function(t){this.observers=this.observers.filter((function(e){return e!==t}))},t.prototype.getRegion=function(){return this.region},t.prototype.changeLocation=function(){this.region.changeLocation()},t.prototype.notifyObservers=function(){console.log("[RegionPublisher]: Notifying "+this.observers.length+" observers.");for(var t=0,e=this.observers;t<e.length;t++)e[t].update(this.region)},t}();e.default=s},888:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(o(995)),n=i(o(955)),s=i(o(792)),a=o(882),u=o(394),h=function(){function t(e){this.ballFactory=new r.default,this.entities=[],this.ticks=0,this.tickLimit=1e3,e.width=t.WIDTH,e.height=t.HEIGHT,this.renderer=new s.default(e),this.rp=new n.default,this.entities.push(this),this.entities.push(this.rp.getRegion());for(var o=[{type:"slow",size:60,color:"rgb(252, 186, 3)"},{type:"normal",size:30,color:"rgb(39, 100, 214)"},{type:"fast",size:15,color:"rgb(173, 40, 173)"}],i=0;i<50;i++){var h={x:(0,a.rand)(t.WIDTH),y:(0,a.rand)(t.HEIGHT)},l=(0,a.rand)(3),p=(0,u.rand_vector)(60/o[l].size,1),c=this.ballFactory.createBall(h,p,o[l].type,o[l].size/5,o[l].color,this.rp.getRegion().getPos());this.rp.subscribe(c),this.entities.push(c)}requestAnimationFrame(this.update.bind(this))}return t.prototype.update=function(){requestAnimationFrame(this.update.bind(this)),this.ticks++,this.renderer.clearCanvas();for(var t=0,e=this.entities;t<e.length;t++)e[t].draw(this.renderer.getCtx());this.ticks%this.tickLimit==0&&(console.log("[World]: Tick Limit reached."),this.rp.changeLocation(),this.rp.notifyObservers())},t.prototype.draw=function(e){e.save(),e.fillStyle="#111111",e.fillRect(0,0,t.WIDTH,t.HEIGHT),e.strokeStyle="#404040",e.lineWidth=.1;for(var o=0;o<t.WIDTH/t.GRID_SIZE;o++)e.moveTo(0,o*t.GRID_SIZE),e.lineTo(t.WIDTH,o*t.GRID_SIZE),e.stroke(),e.moveTo(o*t.GRID_SIZE,0),e.lineTo(o*t.GRID_SIZE,t.HEIGHT),e.stroke();e.restore()},t.WIDTH=800,t.HEIGHT=600,t.GRID_SIZE=100,t}();e.default=h},792:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}return t.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.getCtx=function(){return this.ctx},t}();e.default=o},607:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(o(888)),n=document.querySelector(".canvas");new r.default(n)},882:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randColor=e.rand=void 0,e.rand=function(t,e){return void 0!==e?Math.floor(Math.random()*(t-e+1))+e:Math.floor(Math.random()*t)},e.randColor=function(){return"rgb("+(0,e.rand)(255)+", "+(0,e.rand)(255)+", "+(0,e.rand)(255)+")"}},394:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rand_vector=e.rad=e.deg=e.v_angle=e.v_sub=void 0;var i=o(882);e.v_sub=function(t,e){return{x:e.x-t.x,y:e.y-t.y}},e.v_angle=function(t){return Math.atan(t.y/t.x)+Math.PI*(t.x<0?1:0)},e.deg=function(t){return 180/Math.PI*t},e.rad=function(t){return Math.PI/180*t},e.rand_vector=function(t,e){var o=(0,i.rand)(2*Math.PI,0),r=(0,i.rand)(t,e);return{x:Math.cos(o)*r,y:Math.sin(o)*r,mag:r,theta:o}}}},e={};!function o(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,o),n.exports}(607)})();