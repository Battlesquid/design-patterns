(()=>{"use strict";var t={156:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});var o=r(394),i=function(){function t(t,e,r,o,i){this.isSafe=!0,this.pos=t,this.v=e,this.size=r,this.ballType=o,this.target=i}return t.prototype.getX=function(){return this.pos.x},t.prototype.getY=function(){return this.pos.y},t.prototype.setX=function(t){this.pos.x=t},t.prototype.setY=function(t){this.pos.y=t},t.prototype.getVx=function(){return this.v.x},t.prototype.getVy=function(){return this.v.y},t.prototype.setVX=function(t){this.v.x=t},t.prototype.setVY=function(t){this.v.y=t},t.prototype.invertVX=function(){this.v.x*=-1},t.prototype.invertVY=function(){this.v.y*=-1},t.prototype.getSize=function(){return this.size},t.prototype.getAngle=function(){return this.v.theta},t.prototype.setAngle=function(t){this.v.theta=t},t.prototype.getBallType=function(){return this.ballType},t.prototype.getIsSafe=function(){return this.isSafe},t.prototype.redraw=function(t){this.ballType.update(t,this)},t.prototype.updateVelocity=function(){this.setVX(Math.cos(this.getAngle())*this.v.mag),this.setVY(Math.sin(this.getAngle())*this.v.mag)},t.prototype.recalculateAngle=function(){if(!this.isSafe){var t=(0,o.v_angle)((0,o.v_sub)(this.pos,this.target)),e=Math.sign(t-this.getAngle());this.setAngle(this.getAngle()+.2*e),this.updateVelocity(),this.getAngle().toPrecision(2)===t.toPrecision(2)&&(this.isSafe=!0)}},t.prototype.update=function(t){this.target=t.getPos(),this.isSafe=!1},t}();e.default=i},995:function(t,e,r){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(r(156)),n=o(r(271)),s=function(){function t(){this.ballTypes=[]}return t.prototype.createBall=function(t,e,r,o,n,s){var a=this.getBallType(r,n);return new i.default(t,e,o,a,s)},t.prototype.getBallType=function(t,e){for(var r=0;r<this.ballTypes.length;r++){var o=this.ballTypes[r];if(o.getType()===t&&o.getColor()===e)return console.log('[BallFactory]: Ball of type "'+t+'" already exists.'),this.ballTypes[r]}console.log('[BallFactory]: Creating ball of type "'+t+'"');var i=new n.default(t,e);return this.ballTypes.push(i),i},t}();e.default=s},271:function(t,e,r){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(r(888)),n=function(){function t(t,e){this.type=t,this.color=e}return t.prototype.getType=function(){return this.type},t.prototype.getColor=function(){return this.color},t.prototype.update=function(t,e){e.setX(e.getX()+e.getVx()),e.setY(e.getY()+e.getVy()),(e.getX()>i.default.WIDTH||e.getX()<0)&&e.invertVX(),(e.getY()>i.default.HEIGHT||e.getY()<0)&&e.invertVY(),e.getIsSafe()||e.recalculateAngle(),this.draw(t,e)},t.prototype.draw=function(t,e){t.fillStyle=e.getBallType().getColor(),t.beginPath(),t.ellipse(e.getX(),e.getY(),e.getSize(),e.getSize(),e.getAngle(),0,360),t.fill(),t.beginPath(),t.moveTo(e.getX(),e.getY());var r=e.getSize()*Math.cos(e.getAngle()),o=e.getSize()*Math.sin(e.getAngle());t.lineTo(e.getX()+r,e.getY()+o),t.stroke()},t}();e.default=n},807:function(t,e,r){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(882),n=o(r(888)),s=function(){function t(){this.pos={x:0,y:0},this.rad=0,this.widthBound=0,this.heightBound=0,this.widthBound=n.default.WIDTH,this.heightBound=n.default.HEIGHT,this.pos.x=(0,i.rand)(this.widthBound),this.pos.y=(0,i.rand)(this.heightBound),console.log(this),this.rad=(0,i.rand)(100,40)}return t.prototype.randomizeLoc=function(){this.pos.x=(0,i.rand)(this.widthBound),this.pos.y=(0,i.rand)(this.heightBound),this.rad--,console.log("[Region]: Location: ("+this.pos.x+", "+this.pos.y+") with radius "+this.rad)},t.prototype.getPos=function(){return this.pos},t.prototype.getX=function(){return this.pos.x},t.prototype.getY=function(){return this.pos.y},t.prototype.getRad=function(){return this.rad},t}();e.default=s},955:function(t,e,r){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(r(807)),n=function(){function t(){this.observers=[],this.region=new i.default}return t.prototype.subscribe=function(t){this.observers.push(t)},t.prototype.getRegion=function(){return this.region},t.prototype.unsubscribe=function(t){this.observers=this.observers.filter((function(e){return e!==t}))},t.prototype.randomizeLoc=function(){this.region.randomizeLoc()},t.prototype.notifyObservers=function(){console.log("[RegionPublisher]: Notifying "+this.observers.length+" observers.");for(var t=0,e=this.observers;t<e.length;t++)e[t].update(this.region)},t}();e.default=n},888:function(t,e,r){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(r(995)),n=o(r(955)),s=o(r(792)),a=r(882),u=r(394),h=function(){function t(e){this.ballFactory=new i.default,this.balls=[],this.ticks=0,e.width=t.WIDTH,e.height=t.HEIGHT,this.renderer=new s.default(e),this.rp=new n.default;for(var r=[{type:"slow",weight:.5,size:60,color:"rgb(252, 186, 3)"},{type:"normal",weight:.3,size:30,color:"rgb(39, 100, 214)"},{type:"fast",weight:.2,size:15,color:"rgb(173, 40, 173)"}],o=0;o<50;o++){var h={x:(0,a.rand)(t.WIDTH),y:(0,a.rand)(t.HEIGHT)},l=(0,a.rand)(3),p=(0,u.rand_vector)(60/r[l].size,1),c=this.ballFactory.createBall(h,p,r[l].type,r[l].size/5,r[l].color,this.rp.getRegion().getPos());this.rp.subscribe(c),this.balls.push(c)}requestAnimationFrame(this.draw.bind(this))}return t.prototype.draw=function(){requestAnimationFrame(this.draw.bind(this)),this.ticks++,this.renderer.clearCanvas();var t=this.rp.getRegion();this.renderer.getCtx().fillStyle="#00FF00",this.renderer.getCtx().beginPath(),this.renderer.getCtx().ellipse(t.getX(),t.getY(),t.getRad(),t.getRad(),0,0,360),this.renderer.getCtx().fill();for(var e=0;e<this.balls.length;e++)this.balls[e].redraw(this.renderer.getCtx());this.ticks%500==0&&(this.rp.randomizeLoc(),this.rp.notifyObservers())},t.WIDTH=800,t.HEIGHT=600,t}();e.default=h},792:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}return t.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.getCtx=function(){return this.ctx},t}();e.default=r},607:function(t,e,r){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(r(888)),n=document.querySelector(".canvas");new i.default(n)},882:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.randColor=e.rand=void 0,e.rand=function(t,e){return void 0!==e?Math.floor(Math.random()*(t-e+1))+e:Math.floor(Math.random()*t)},e.randColor=function(){return"rgb("+(0,e.rand)(255)+", "+(0,e.rand)(255)+", "+(0,e.rand)(255)+")"}},394:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rand_vector=e.rad=e.deg=e.v_angle=e.v_sub=void 0;var o=r(882);e.v_sub=function(t,e){return{x:e.x-t.x,y:e.y-t.y}},e.v_angle=function(t){return Math.atan(t.y/t.x)+Math.PI*(t.x<0?1:0)},e.deg=function(t){return 180/Math.PI*t},e.rad=function(t){return Math.PI/180*t},e.rand_vector=function(t,e){var r=(0,o.rand)(2*Math.PI,0),i=(0,o.rand)(t,e);return{x:Math.cos(r)*i,y:Math.sin(r)*i,mag:i,theta:r}}}},e={};!function r(o){var i=e[o];if(void 0!==i)return i.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,r),n.exports}(607)})();